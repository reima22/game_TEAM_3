//==============================================================================
//
// ƒ|[ƒY”wŒiˆ—kpause_bg.cppl
// Author : Mare Horiai
//
//==============================================================================
#include "main.h"
#include "manager.h"
#include "pause_bg.h"
#include "renderer.h"
#include "scene2D.h"

//==============================================================================
// ƒRƒ“ƒXƒgƒ‰ƒNƒ^
//==============================================================================
CPauseBg::CPauseBg(int nPriority) : CScene(nPriority)
{

}

//==============================================================================
// ƒfƒXƒgƒ‰ƒNƒ^
//==============================================================================
CPauseBg::~CPauseBg()
{

}

//==============================================================================
// ƒ|[ƒY”wŒi‚Ì‰Šú‰»ˆ—
//==============================================================================
HRESULT CPauseBg::Init(void)
{
	// ‰Šú‰»
	m_pScene2D = CScene2D::Create();

	// î•ñÝ’è
	m_pScene2D->SetPosition(SCREEN_CENTER);
	m_pScene2D->SetSize(SCREEN_SIZE);
	m_pScene2D->SetCol(D3DXCOLOR(0.0f, 0.0f, 0.0f, 0.5f));
	m_pScene2D->SetTex(1, 1, 0, 0, 0.0f, 0.0f);

	return S_OK;
}

//==============================================================================
// ƒ|[ƒY”wŒi‚ÌI—¹ˆ—
//==============================================================================
void CPauseBg::Uninit(void)
{
	// 2Dƒ|ƒŠƒSƒ“‚Ì”jŠü
	if (m_pScene2D != NULL)
	{
		m_pScene2D->Uninit();
		m_pScene2D = NULL;
	}
}

//==============================================================================
// ƒ|[ƒY”wŒi‚ÌXVˆ—
//==============================================================================
void CPauseBg::Update(void)
{
	// ƒ|[ƒY‚Ìó‘Ô
	bool bPause = CPause::GetPause();

	// ”wŒi‚ÌF
	D3DXCOLOR col = D3DXCOLOR(0.0f, 0.0f, 0.0f, 0.0f);	// ‰Šú”’l

	switch (bPause)
	{
	case true:
		col.a = 0.5f;
		break;

	case false:
		col.a = 0.0f;
		break;
	}

	m_pScene2D->SetCol(col);
}

//==============================================================================
// ƒ|[ƒY”wŒi‚Ì•`‰æˆ—
//==============================================================================
void CPauseBg::Draw(void)
{
	if (m_pScene2D != NULL)
	{
		m_pScene2D->Draw();
	}
}

//==============================================================================
// ƒ|[ƒY”wŒi‚Ì¶¬ˆ—
//==============================================================================
CPauseBg *CPauseBg::Create(void)
{
	// ƒCƒ“ƒXƒ^ƒ“ƒX¶¬
	CPauseBg *pPauseBg;
	pPauseBg = new CPauseBg;

	// ‰Šú‰»
	if (pPauseBg != NULL)
	{
		pPauseBg->Init();
	}


	return pPauseBg;
}